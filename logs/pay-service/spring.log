19:31:44:248  INFO 19356 --- [main] com.hmall.pay.PayApplication             : Starting PayApplication using Java 17.0.7 on LAPTOP-UP3PE7GP with PID 19356 (D:\学习资料存放处\微服务项目\heima24\day03-微服务01\hmall\pay-service\target\classes started by 许展沛 in D:\学习资料存放处\微服务项目\heima24\day03-微服务01\hmall)
19:31:44:253 DEBUG 19356 --- [main] com.hmall.pay.PayApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
19:31:44:254  INFO 19356 --- [main] com.hmall.pay.PayApplication             : The following 1 profile is active: "local"
19:31:45:128  INFO 19356 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=9eeedb9a-772f-3399-a020-ca05e826098c
19:31:45:650  INFO 19356 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8086 (http)
19:31:45:651  INFO 19356 --- [main] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [2.0.5] using APR version [1.7.4].
19:31:45:651  INFO 19356 --- [main] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [true].
19:31:45:651  INFO 19356 --- [main] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
19:31:45:657  INFO 19356 --- [main] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 3.0.10 1 Aug 2023]
19:31:45:665  INFO 19356 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
19:31:45:665  INFO 19356 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
19:31:45:784  INFO 19356 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
19:31:45:784  INFO 19356 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1486 ms
19:31:46:054  INFO 19356 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
19:31:46:165  INFO 19356 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
19:31:48:323  INFO 19356 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:31:48:362  INFO 19356 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
19:31:49:606  INFO 19356 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:31:49:843  INFO 19356 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of 9d50e439-0e04-4ba0-99d2-4fed4128d3f7
19:31:49:923  INFO 19356 --- [main] org.reflections.Reflections              : Reflections took 30 ms to scan 1 urls, producing 3 keys and 6 values 
19:31:49:952  INFO 19356 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 4 keys and 9 values 
19:31:49:961  INFO 19356 --- [main] org.reflections.Reflections              : Reflections took 6 ms to scan 1 urls, producing 3 keys and 10 values 
19:31:49:963  WARN 19356 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
19:31:49:972  INFO 19356 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 1 keys and 5 values 
19:31:49:982  INFO 19356 --- [main] org.reflections.Reflections              : Reflections took 7 ms to scan 1 urls, producing 1 keys and 7 values 
19:31:49:997  INFO 19356 --- [main] org.reflections.Reflections              : Reflections took 10 ms to scan 1 urls, producing 2 keys and 8 values 
19:31:49:999  WARN 19356 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
19:31:50:000  INFO 19356 --- [main] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] RpcClient init label, labels = {module=naming, source=sdk}
19:31:50:002  INFO 19356 --- [main] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
19:31:50:003  INFO 19356 --- [main] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
19:31:50:003  INFO 19356 --- [main] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
19:31:50:004  INFO 19356 --- [main] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Try to connect to server on start up, server: {serverIp = '192.168.200.130', server main port = 8848}
19:31:51:168  INFO 19356 --- [main] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Success to connect to server [192.168.200.130:8848] on start up, connectionId = 1732793503280_192.168.200.1_49922
19:31:51:169  INFO 19356 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Notify connected event to listeners.
19:31:51:169  INFO 19356 --- [main] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
19:31:51:169  INFO 19356 --- [main] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1087/0x000000080140cd50
19:31:51:216  INFO 19356 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8086 (http) with context path ''
19:31:51:233  INFO 19356 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 192.168.200.1:8086 register finished
19:31:51:778  INFO 19356 --- [nacos-grpc-client-executor-11] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Receive server push request, request = NotifySubscriberRequest, requestId = 3
19:31:51:780  INFO 19356 --- [nacos-grpc-client-executor-11] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Ack server push request, request = NotifySubscriberRequest, requestId = 3
19:31:52:369  INFO 19356 --- [main] o.s.cloud.commons.util.InetUtils         : Cannot determine local hostname
19:31:52:369  INFO 19356 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
19:31:52:371  INFO 19356 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
19:31:52:395  INFO 19356 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
19:31:52:508  INFO 19356 --- [main] com.hmall.pay.PayApplication             : Started PayApplication in 9.935 seconds (JVM running for 10.381)
19:56:26:581  INFO 19356 --- [http-nio-8086-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
19:56:26:582  INFO 19356 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
19:56:26:600  INFO 19356 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 17 ms
19:56:26:719  WARN 19356 --- [http-nio-8086-exec-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @235834f2
19:56:26:734  INFO 19356 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
19:56:26:948  INFO 19356 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
19:56:26:954 DEBUG 19356 --- [http-nio-8086-exec-1] c.h.p.mapper.PayOrderMapper.selectList   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
19:56:26:970 DEBUG 19356 --- [http-nio-8086-exec-1] c.h.p.mapper.PayOrderMapper.selectList   : ==> Parameters: 1862103207245807617(Long)
19:56:26:992 DEBUG 19356 --- [http-nio-8086-exec-1] c.h.p.mapper.PayOrderMapper.selectList   : <==      Total: 0
20:21:08:210 DEBUG 19356 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectList   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
20:21:08:219 DEBUG 19356 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectList   : ==> Parameters: 1862109405282066434(Long)
20:21:08:223 DEBUG 19356 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectList   : <==      Total: 0
20:27:38:952 DEBUG 19356 --- [http-nio-8086-exec-5] c.h.p.mapper.PayOrderMapper.selectList   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
20:27:38:953 DEBUG 19356 --- [http-nio-8086-exec-5] c.h.p.mapper.PayOrderMapper.selectList   : ==> Parameters: 1862111052955688961(Long)
20:27:38:954 DEBUG 19356 --- [http-nio-8086-exec-5] c.h.p.mapper.PayOrderMapper.selectList   : <==      Total: 0
20:27:59:209 DEBUG 19356 --- [http-nio-8086-exec-6] c.h.p.mapper.PayOrderMapper.selectList   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
20:27:59:209 DEBUG 19356 --- [http-nio-8086-exec-6] c.h.p.mapper.PayOrderMapper.selectList   : ==> Parameters: 1862111188758949890(Long)
20:27:59:210 DEBUG 19356 --- [http-nio-8086-exec-6] c.h.p.mapper.PayOrderMapper.selectList   : <==      Total: 0
20:27:59:291 DEBUG 19356 --- [http-nio-8086-exec-6] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
20:27:59:297 DEBUG 19356 --- [http-nio-8086-exec-6] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1862111192420564995(Long), 1862111188758949890(Long), 1862111192420564994(Long), 1(Long), balance(String), 58800(Integer), 5(Integer), 1(Integer), 2024-11-28T22:27:59.280944200(LocalDateTime)
20:27:59:301 DEBUG 19356 --- [http-nio-8086-exec-6] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
20:28:08:868 DEBUG 19356 --- [http-nio-8086-exec-7] c.h.p.mapper.PayOrderMapper.selectList   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
20:28:08:869 DEBUG 19356 --- [http-nio-8086-exec-7] c.h.p.mapper.PayOrderMapper.selectList   : ==> Parameters: 1862111188758949890(Long)
20:28:08:875 DEBUG 19356 --- [http-nio-8086-exec-7] c.h.p.mapper.PayOrderMapper.selectList   : <==      Total: 1
20:28:54:125 DEBUG 19356 --- [http-nio-8086-exec-8] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
20:28:54:125 DEBUG 19356 --- [http-nio-8086-exec-8] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1862111192420564995(Long)
20:28:54:127 DEBUG 19356 --- [http-nio-8086-exec-8] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
20:28:54:138 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=58800 HTTP/1.1
20:28:54:138 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
20:28:54:138 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
20:28:54:372 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (232ms)
20:28:54:373 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
20:28:54:373 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
20:28:54:373 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Thu, 28 Nov 2024 12:28:54 GMT
20:28:54:373 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
20:28:54:373 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
20:28:54:373 DEBUG 19356 --- [http-nio-8086-exec-8] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
20:28:54:379 DEBUG 19356 --- [http-nio-8086-exec-8] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
20:28:54:380 DEBUG 19356 --- [http-nio-8086-exec-8] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-11-28T20:28:54.373744100(LocalDateTime), 1862111192420564995(Long), 0(Integer), 1(Integer)
20:28:54:382 DEBUG 19356 --- [http-nio-8086-exec-8] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
20:28:54:818  INFO 19356 --- [nacos-grpc-client-executor-712] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Receive server push request, request = NotifySubscriberRequest, requestId = 43
20:28:54:819  INFO 19356 --- [nacos-grpc-client-executor-712] com.alibaba.nacos.common.remote.client   : [9d50e439-0e04-4ba0-99d2-4fed4128d3f7] Ack server push request, request = NotifySubscriberRequest, requestId = 43
20:31:36:847 DEBUG 19356 --- [http-nio-8086-exec-1] c.h.p.mapper.PayOrderMapper.selectList   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
20:31:36:847 DEBUG 19356 --- [http-nio-8086-exec-1] c.h.p.mapper.PayOrderMapper.selectList   : ==> Parameters: 1862112103989637122(Long)
20:31:36:849 DEBUG 19356 --- [http-nio-8086-exec-1] c.h.p.mapper.PayOrderMapper.selectList   : <==      Total: 0
20:31:36:850 DEBUG 19356 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
20:31:36:851 DEBUG 19356 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1862112104954314755(Long), 1862112103989637122(Long), 1862112104954314754(Long), 1(Long), balance(String), 9700(Integer), 5(Integer), 1(Integer), 2024-11-28T22:31:36.850216300(LocalDateTime)
20:31:36:855 DEBUG 19356 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
20:31:39:716 DEBUG 19356 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
20:31:39:717 DEBUG 19356 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1862112104954314755(Long)
20:31:39:719 DEBUG 19356 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
20:31:39:719 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=9700 HTTP/1.1
20:31:39:719 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 1
20:31:39:720 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
20:31:39:819 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (98ms)
20:31:39:819 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
20:31:39:819 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
20:31:39:819 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Thu, 28 Nov 2024 12:31:39 GMT
20:31:39:819 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
20:31:39:819 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
20:31:39:819 DEBUG 19356 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
20:31:39:820 DEBUG 19356 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
20:31:39:820 DEBUG 19356 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-11-28T20:31:39.819291500(LocalDateTime), 1862112104954314755(Long), 0(Integer), 1(Integer)
20:31:39:822 DEBUG 19356 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
20:31:46:742 DEBUG 19356 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectList   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
20:31:46:742 DEBUG 19356 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectList   : ==> Parameters: 1862112103989637122(Long)
20:31:46:745 DEBUG 19356 --- [http-nio-8086-exec-3] c.h.p.mapper.PayOrderMapper.selectList   : <==      Total: 1
